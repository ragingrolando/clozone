<!DOCTYPE html>
<html ng-app="clozone" lang="en">

  <head>
    <title>Clozone</title>
    <meta name="description" content="The funny game that freshens Dots and Boxes!" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="57x57" href="logo/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="logo/apple-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="logo/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="logo/apple-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="logo/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="logo/apple-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="logo/apple-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="logo/apple-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="logo/apple-icon-180x180.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="logo/android-icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="logo/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="logo/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="logo/favicon-16x16.png" />
    <link rel="manifest" href="manifest.json" />
    <meta name="msapplication-config" content="browserconfig.xml" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="logo/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />
    <meta property="og:title" content="Clozone" />
    <meta property="og:description" content="The funny game that freshens Dots and Boxes!" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.clo.zone" />
    <meta property="og:image" content="https://www.clo.zone/logo/clozone-512x512.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />
    <!-- build:css @cssFileName -->
    <!-- bower:css -->
    <!-- endbower -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- endbuild -->
  </head>

  <body ng-controller="game.GameController">

    <div id="container" ng-cloak>

      <h1>
        <span font-size="10" of="container" ng-style="{ 'color': game.player1.color }">Clo</span><!--
        --><span font-size="10" of="container" ng-style="{ 'color': game.player2.color }">Zone</span>
      </h1>

      <div class="clear"></div>

      <div class="score player1">
        <div class="box" ng-style="{ 'background-color': game.player1.color }"
          ng-class="{ 'current-player': game.player1 === game.currentPlayer }"
          font-size="6" of="container" ng-bind="game.player1.score"></div>
        <div class="indicator" ng-show="game.player1 === game.currentPlayer"
          font-size="5" of="container"
          ng-style="{ 'color': game.finished ? 'transparent' : game.player1.color }">&#9650;</div>
      </div>
      <div class="score player2">
        <div class="box" ng-style="{ 'background-color': game.player2.color }"
          ng-class="{ 'current-player': game.player2 === game.currentPlayer }"
          font-size="6" of="container" ng-bind="game.player2.score"></div>
        <div class="indicator" ng-show="game.player2 === game.currentPlayer"
          font-size="5" of="container"
          ng-style="{ 'color': game.finished ? 'transparent' : game.player2.color }">&#9650;</div>
      </div>

      <div class="clear"></div>

      <section class="map-container" ng-style="{ 'padding-top': (game.map.dimensions.ratio * 100) + '%' }">

        <svg class="map" ng-attr-view_box="{{ game.map.dimensions.xMin }} {{ game.map.dimensions.yMin }} {{ game.map.dimensions.width }} {{ game.map.dimensions.height }}" preserveAspectRatio="none">

          <polygon ng-repeat="zone in game.map.zones"
            ng-attr-points="{{ zone.points.join(' ') }}"
            ng-attr-fill="{{ zone.color }}" fill-opacity="0.4" stroke-width="0" />

          <line ng-repeat-start="segment in game.map.segments"
            ng-attr-x1="{{ segment.x1 }}" ng-attr-x2="{{ segment.x2 }}" ng-attr-y1="{{ segment.y1 }}" ng-attr-y2="{{ segment.y2 }}"
            ng-attr-stroke="{{ segment.color }}" stroke-width="2%" stroke-linecap="butt" />

          <polygon ng-repeat-end ng-click="game.onSegmentClick(segment)"
            ng-attr-points="{{ segment.clickableAreaPoints.join(' ') }}"
            ng-class="{ 'consumable': !segment.consumed }"
            fill="transparent" stroke-width="0" />

          <circle ng-repeat="point in game.map.points"
            ng-attr-cx="{{ point.cx }}" ng-attr-cy="{{ point.cy }}" r="2%"
            ng-attr-fill="{{ point.color }}" stroke-width="0" />

        </svg>

      </section>

      <span class="version" font-size="5" of="container"
        ng-bind="'v' + $root.version"></span>

      <div class="overlay" ng-show="game.finished">
        <div class="background"></div>
        <div class="popup" ng-style="{ border: 'solid 2px ' + (game.draw ? 'gray' : game.winner.color) }">
          <span ng-if="game.draw" class="message"
            font-size="5" of="container">It's a draw!</span>
          <div class="winner"
             font-size="6" of="container"
             ng-style="{ 'background-color': game.winner.color }">
             <span ng-if="!game.draw" class="icon">&#10004;</span>
             <span ng-bind="game.winner.score"></span>
           </div>
          <div class="looser {{ game.draw ? 'draw' : '' }}"
             font-size="game.draw ? 6 : 4" of="container"
             ng-style="{ 'background-color': game.looser.color }">
             <span ng-if="!game.draw" class="icon">&#10007;</span>
             <span ng-bind="game.looser.score"></span>
           </div>
          <button type="button" class="restart"
            font-size="8" of="container"
            ng-click="restart()">&#8635;</button>
        </div>
      </div>

    </div>

    <!-- build:js @jsFileName -->
    <script src="bootstrap.js"></script>
    <!-- bower:js -->
    <!-- endbower -->
    <!-- inject:js -->
    <!-- endinject -->
    <script src="swr.js"></script>
    <!-- endbuild -->

  </body>

</html>
